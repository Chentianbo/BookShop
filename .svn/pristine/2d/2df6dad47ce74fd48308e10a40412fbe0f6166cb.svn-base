@{
    Layout = null;
    var sysEntity = MvcCore.Unity.Get<JN.Data.Service.ISysSettingService>().Single(1);
    var cacheSysParam = MvcCore.Unity.Get<JN.Data.Service.ISysParamService>().ListCache("sysparams", x => x.ID < 10000);
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Neon Admin Panel" />
    <meta name="author" content="" />

    <title>@(sysEntity.SysName) | Login</title>

    <link rel="stylesheet" href="/theme/mmm/css/font-awesome.css">
    <link rel="stylesheet" href="/theme/mmm/css/metisMenu.css">
    <link rel="stylesheet" href="/theme/mmm/css/animate.css">
    <link rel="stylesheet" href="/theme/mmm/css/bootstrap.css">
    <link rel="stylesheet" href="/theme/mmm/css/toastr.min.css">
    <link rel="stylesheet" href="/theme/mmm/css/default.css">
    <link rel="stylesheet" href="/theme/052401/nmmcss/main.css" type="text/css">
    <link rel="stylesheet" href="/Theme/052401/nmmcss/main.v001.css" />
    <link rel="stylesheet" href="/theme/052401/nmmcss/zh-CN.css" type="text/css">
    <link href="/Theme/mmm/css/datatime.css" rel="stylesheet" />
    <link href="/Theme/mmm/css/gold_style.css" rel="stylesheet" />

    <script src="/theme/neon/assets/js/jquery-1.11.0.min.js"></script>
    <!--[if lt IE 9]><script src="/assets1/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <style>
        .file-input-wrapper {
            overflow: hidden;
            position: relative;
            cursor: pointer;
            z-index: 1;
        }

            .file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover {
                position: absolute;
                top: 0;
                left: 0;
                cursor: pointer;
                opacity: 0;
                filter: alpha(opacity=0);
                z-index: 99;
                outline: 0;
            }

        .file-input-name {
            margin-left: 8px;
        }
    </style>

</head>
<body>
    <!--[if lt IE 9]>
    <div style="color:#fff; width:100%; height:100%; line-height:100px; font-size:20px; text-align:center">
        您目前使用的是旧版浏览器，为更加安全使用请下载最新浏览器<a style="color:red" href="http://browsehappy.com/" target="_blank">点此下载</a>
    </div>
    <![endif]-->
    <!-- This is needed when you send requests via Ajax -->
    <script type="text/javascript">
        var baseurl = '';
    </script>
    <div class="container" style="max-width: 1170px;">
        <div class="row">
            <div>
                <div class="maintitle">
                    
                        <h2 style="text-align: center; padding-top: 10px;">@T("注册新用户") </h2>
                    
                    
                </div>

                <div class="mainoprate">
                    <form class="form-horizontal margin-none" id="frmAdd" method="post">
                        <div class="widget widget-body-white padding-none">
                            <div class="widget-head">
                                <h4 class="heading">账号详情</h4>
                            </div>
                            <div class="widget-body">
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="firstname">用户名</label>
                                    <div class="col-md-8">
                                        <div class="controls">
                                            <input type="text" class="form-control" name="username" />
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="firstname">推荐人用户名</label>
                                    <div class="col-md-8">
                                        <div class="controls">
                                            <input type="text" class="form-control auto-ajax " placeholder="" name="refereeuser" value="@ViewBag.username" autocomplete="off" readonly>
                                            @*<span class="input-group-btn">
                                                    <button type="button" id="jhwjjc" class="btn btn-default btn-sm" onclick="cke()">查看推荐人用户名</button>
                                                </span>*@
                                        </div>
                                    </div>
                                </div>
                                @*<div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">所属经理人用户名</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input type="text" class="form-control auto-ajax " placeholder="" name="agentuser" value="@Umodel.AgentUser" autocomplete="off">
                                                <span class="input-group-btn">
                                                <button type="button" id="jhwc" class="btn btn-default btn-sm" onclick="agecke()">检查所属经理用户名</button>
                                            </span>
                                            </div>
                                        </div>
                                    </div>*@

                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="firstname">登录密码</label>
                                    <div class="col-md-8">
                                        <div class="controls">
                                            <input type="password" class="form-control" name="password" />
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="firstname">确认密码</label>
                                    <div class="col-md-8">
                                        <div class="controls">
                                            <input type="password" class="form-control" name="confirmpassword" />
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="firstname">安全密码</label>
                                    <div class="col-md-8">
                                        <div class="controls">
                                            <input type="password" class="form-control" name="password2" />
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="firstname">确认安全密码</label>
                                    <div class="col-md-8">
                                        <div class="controls">
                                            <input type="password" class="form-control" name="confirmpassword2" />
                                        </div>
                                    </div>
                                </div>
                                @if (sysEntity.RegistItems.Contains(",Question,") || sysEntity.RegistNotNullItems.Contains(",Question,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">取回密码问题</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="question" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",Answer,") || sysEntity.RegistNotNullItems.Contains(",Answer,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">取回密码答案</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="answer" />
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                            <footer class="data-footer innerAll half text-right clearfix"></footer>
                        </div>

                        <div class="widget widget-body-white padding-none">
                            <div class="widget-head">
                                <h4 class="heading">个人详情</h4>
                            </div>
                            <div class="widget-body">
                                @if (sysEntity.RegistItems.Contains(",NickName,") || sysEntity.RegistNotNullItems.Contains(",NickName,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">昵称</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="nickname" />
                                            </div>
                                        </div>
                                    </div>
                                }

                                @if (sysEntity.RegistItems.Contains(",RealName,") || sysEntity.RegistNotNullItems.Contains(",RealName,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">姓名</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="realname" />
                                            </div>
                                        </div>
                                    </div>
                                }

                                @if (sysEntity.RegistItems.Contains(",Email,") || sysEntity.RegistNotNullItems.Contains(",Email,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">邮箱地址</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="email" />
                                            </div>
                                        </div>
                                    </div>
                                }

                                @if (sysEntity.RegistItems.Contains(",Mobile,") || sysEntity.RegistNotNullItems.Contains(",Mobile,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">手机号码</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="mobile" id="mobile" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistNeedSMSVerification ?? false)
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">手机验证码</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input type="text" class="form-control auto-ajax " placeholder="" name="ageUser" id="pemail" autocomplete="off">
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default btn-sm" id="codebtn" onclick="reqUID()">发送到手机</button>

                                                </span>
                                            </div>
                                            <span id="dTip0"></span>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",IDCard,") || sysEntity.RegistNotNullItems.Contains(",IDCard,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">身份证号码</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="idcard" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",AliPay,") || sysEntity.RegistNotNullItems.Contains(",AliPay,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">支付宝账号</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="alipay" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",WeiXin,") || sysEntity.RegistNotNullItems.Contains(",WeiXin,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">微信账号</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="weixin" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",BitCoin,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">比特币地址</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="bitcoin" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",QQ,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">QQ账号</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="qq" />
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                            <footer class="data-footer innerAll half text-right clearfix"></footer>
                        </div>

                        <div class="widget widget-body-white padding-none">
                            <div class="widget-head">
                                <h4 class="heading">银行资料</h4>
                            </div>
                            <div class="widget-body">
                                @if (sysEntity.RegistItems.Contains(",BankName,") || sysEntity.RegistNotNullItems.Contains(",BankName,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">开户银行</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="bankname" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",BankOfDeposit,") || sysEntity.RegistNotNullItems.Contains(",BankOfDeposit,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">分行或支行名称</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="bankofdeposit" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",BankUser,") || sysEntity.RegistNotNullItems.Contains(",BankUser,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">开户名</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="bankuser" />
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (sysEntity.RegistItems.Contains(",BankCard,") || sysEntity.RegistNotNullItems.Contains(",BankCard,"))
                                {
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="firstname">账号</label>
                                        <div class="col-md-8">
                                            <div class="controls">
                                                <input type="text" class="form-control" name="bankcard" />
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                            <footer class="data-footer innerAll half text-right clearfix"></footer>
                        </div>

                        <div class="widget widget-body-white padding-none">
                            <div class="widget-head">
                                <h4 class="heading">安全验证</h4>
                            </div>
                            <div class="row" style="padding-top: 15px; padding-bottom: 10px; background: rgba(68, 64, 64, 0.2);">
                                <label class="col-md-2 control-label" for="firstname">验证码:</label>
                                <div class="col-md-8">
                                    <div class="controls">
                                        <input type="text" class="form-control" style="width:140px; float:left; margin-right:10px;" name="code" placeholder="" autocomplete="off" />
                                        <img id="imgCode" src="/UserCenter/Login/GetCodeImage?id=1" onclick="ChangeCheckCode();return false;" style="border:none; height:32px;" />
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="background: rgba(68, 64, 64, 0.2); padding-bottom: 20px;">
                                <label class="col-md-2 control-label"></label>
                                <div class="checkbox col-lg-8">
                                    <label>&nbsp;<input type="checkbox" checked="">@T("我已完全了解所有风险")</label>
                                    &nbsp;&nbsp;&nbsp;&nbsp;

                                </div>
                            </div>
                            <div class="row">

                                <footer class="data-footer innerAll half text-right clearfix">
                                    <button type="button" class="btn btn-primary" id="btnAdd">@T("注册")</button>
                                </footer>

                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
    
 

    @*<script src="/scripts/jq_area.js"></script>
        <script src="/scripts/region.js"></script>*@
    <!-- Bottom Scripts -->
    <script src="/theme/neon/assets/js/bootstrap.js"></script>
    <script src="~/js/jquery.form.js"></script>
    <script type="text/javascript">
        function ChangeCheckCode() {
            var oldUrl = $('#imgCode').attr("src");
            $('#imgCode').attr("src", oldUrl + '1');
        }


            $("#btnAdd").click(function () {
                //var province = $("#province").find("option:selected").text();
                //var city = $("#city").find("option:selected").text();
                //var county = $("#county").find("option:selected").text();
                //$("#hidprovince").val(province);
                //$("#hidcity").val(city);
                //$("#hidcounty").val(county);

                $("#frmAdd").ajaxSubmit({
                    url: "@Url.Action("Index")",
                    type: "post",
                    success: function (data) {
                        if (data.Status == 200) {
                            alert("注册成功，即将为您返回当前页！");
                            location.href = "@(Url.Action("index", "login"))";
                        } else {
                            alert("注册失败：" + data.Message);
                        }
                    },
                    error: function (error) {
                        alert(error);
                    }
                });
            });

        </script>

    <script>
    //发送短信验证
    function reqUID() {
        var dTip = document.getElementById("dTip0");
        var the = $("#mobile").val();
        var myreg = /^(((13[0-9]{1})|(18[0-9]{1})|(15[0-9]{1})|(17[0-9]{1}))+\d{8})$/;
        if (!myreg.test(the)) {
            alert('请输入有效的手机号码！');
            document.form1.mobile.focus();
            return false;
        }
        // alert(the);
        if (the != "") {
            dTip.innerHTML = '<font color="#999999">正在发送短信，请稍后...</font>';
            $.post("/reg/SendMobileMsm", { myphone: the }, function (data) {
                //alert(data)
                if (data.Status == 200) {
                    dTip.innerHTML = "<font color='#669900'>短信已发送！</font>";
                    //dTip.style.display = "";
                } else {
                    //var strs = str.split("|$|");
                    dTip.innerHTML = "<font color='#ff0000'>" + data.Message + "</font>";
                    //dTip.style.display = "";
                }
            });
        } else {
            dTip.innerHTML = '<font color="ff0000">编号不能为空！</font>';
        }
    }

    var wait = 60;
    document.getElementById("codebtn").disabled = false;
    function time(o) {
        if (wait == 0) {
            o.removeAttribute("disabled");
            o.innerHTML = "重新获取验证码";
            wait = 60;
        } else {
            o.setAttribute("disabled", true);
            o.innerHTML = "重新发送(" + wait + ")";
            wait--;
            setTimeout(function () {
                time(o)
            },
            1000)
        }
    }
    document.getElementById("codebtn").onclick = function () {
        reqUID();
        time(this);
    }
    </script>
</body>
</html>
